# 채팅 및 그래프 레이아웃 문제 CTO 검토

## 발견된 문제

### 1. 한글 입력 자동완성 버그 (Critical)
- **현상**: "사례" 입력 후 Enter 시 "례"만 남아서 별도 메시지로 전송됨
- **원인**: IME(Input Method Editor) composition 상태 미확인
- **영향**: 사용자 입력 오류, 불필요한 메시지 전송

### 2. LLM/DB 답변 중복 표시 (High)
- **현상**: DB 조회 실패 → LLM 추론 시도 → 둘 다 화면에 표시됨
- **원인**: 에러 처리 후에도 정상 응답이 추가로 표시되거나, sendMessage 중복 호출
- **영향**: 혼란스러운 UX, 잘못된 정보 표시

### 3. 노드 수 제한 vs 넓게 퍼지기 (High)
- **현상**: 노드 겹침 방지를 위해 limit=15로 줄임
- **사용자 요구**: 모든 노드를 보되 넓게 퍼지길 원함
- **해결**: 초기 로드 수 증가 + 레이아웃 알고리즘 강화

## 해결 방안

### 1. IME Composition 처리
- `keydown` 이벤트에서 `e.isComposing` 체크
- composition 중이면 Enter 무시

### 2. 중복 메시지 방지
- `sendMessage` 실행 중 플래그로 중복 호출 차단
- 에러 발생 시에도 한 번만 표시

### 3. 그래프 레이아웃 강화
- 초기 로드: 15 → 50 nodes (원래대로)
- Force-directed 반복: 80 → 150회
- 최소 거리: 100px → 120px
- 화면 크기에 맞춘 동적 배치
