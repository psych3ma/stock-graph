# 디자인 QA 리스트

**작성 일자**: 2026-02-17  
**기준**: 레퍼런스 이미지 (두 번째 이미지)  
**현황**: 현재 구현 (첫 번째 이미지)

---

## 🔴 Critical Issues (즉시 수정 필요)

### DQA-001: 노드 겹침 문제 (Severe Overlapping)
**현황**: 노드들이 심하게 겹쳐있어 개별 노드를 구분할 수 없음  
**레퍼런스**: 노드 간 충분한 간격 유지, 각 노드가 명확히 구분됨  
**원인**: 
- 노드 간 최소 거리(`minDist`)가 충분하지 않음
- 반발력(repulsion force)이 약함
- 초기 배치 알고리즘이 연결도만 고려하고 공간 분산을 충분히 고려하지 않음

**개발자 전달사항**:
```
- 노드 간 최소 거리(minDist)를 150px 이상으로 증가
- 반발력 강도를 2배 이상 증가
- 초기 배치 시 노드 간 거리 검증 로직 추가
- force-directed 알고리즘 반복 횟수 증가 (300 → 500)
```

---

### DQA-002: 레이블 가독성 문제 (Unreadable Labels)
**현황**: 
- 노드 내부 문자는 보이지만 레이블이 잘려서 읽을 수 없음
- "미래에셋증자아이엠라야니엘", "노무라금주투지주" 등이 잘림
- 레이블이 다른 노드에 가려짐

**레퍼런스**: 
- 모든 레이블이 완전히 표시됨
- 레이블이 노드 아래에 명확하게 배치됨
- 레이블 간 겹침 없음

**원인**:
- 레이블이 선택된 노드에만 표시되거나 조건부 표시
- 레이블 위치 계산이 노드 겹침을 고려하지 않음
- 레이블 충돌 감지 및 회피 로직 없음

**개발자 전달사항**:
```
- 모든 노드에 레이블 표시 (조건부 제거)
- 레이블 위치를 노드 아래 고정 (y: p.y + r + 16)
- 레이블 충돌 감지: 다른 노드/레이블과 겹치지 않도록 위치 조정
- 레이블이 화면 밖으로 나가지 않도록 클리핑
- 레이블 길이 제한: 15자 초과 시 "..." 처리 (현재 구현 확인 필요)
```

---

### DQA-003: 레이아웃 알고리즘 실패
**현황**: 노드들이 U자형 또는 사각형으로 몰려있음, 연결도 기반 배치가 제대로 작동하지 않음  
**레퍼런스**: 노드들이 자연스럽게 분산되어 있으며, 연결이 많은 노드가 중심에 위치

**원인**:
- 연결도 기반 중심 인력이 너무 약함 (`centerForce = normalizedDegree * 0.3`)
- 반발력과 중심 인력의 균형이 맞지 않음
- 초기 배치가 연결도만 고려하고 공간 분산을 고려하지 않음

**개발자 전달사항**:
```
- 중심 인력 강도 증가: normalizedDegree * 0.3 → 0.5~0.8
- 연결도가 0인 노드는 외곽으로 강제 배치
- 초기 배치 시 연결도와 공간 분산을 동시에 고려
- 연결이 많은 노드(상위 20%)는 중심 반경 30% 내에 배치
- 연결이 적은 노드(하위 20%)는 외곽 반경 70~100%에 배치
```

---

## ⚠️ High Priority Issues

### DQA-004: 노드 크기 일관성
**현황**: 모든 노드가 동일한 크기로 보임  
**레퍼런스**: 노드 크기가 일관되지만, 중요도에 따라 시각적 강조 가능

**개발자 전달사항**:
```
- 연결도에 따라 노드 크기 미세 조정 고려 (선택사항)
- 현재 NODE_RADIUS는 타입별로만 구분됨 (company:22, person:16 등)
- 연결도가 높은 노드는 약간 더 크게 표시할 수 있음 (예: +2px)
```

---

### DQA-005: 엣지(관계선) 가시성
**현황**: 엣지가 거의 보이지 않거나 매우 얇음  
**레퍼런스**: 엣지가 명확하게 보이고, 방향성이 화살표로 표시됨

**개발자 전달사항**:
```
- 엣지 stroke-width 확인: 현재 1.8px → 2.0px 이상 권장
- 엣지 색상 확인: 현재 #a8998a → 더 진한 색상 (#8b7d6f) 권장
- 엣지 opacity 확인: 현재 0.85 → 1.0 권장
- 화살표 마커 크기 및 가시성 확인
```

---

### DQA-006: 레이블 폰트 및 스타일
**현황**: 레이블 폰트 크기나 스타일이 레퍼런스와 다를 수 있음  
**레퍼런스**: 레이블이 명확하고 읽기 쉬운 크기와 스타일

**개발자 전달사항**:
```
- 레이블 font-size 확인: 현재 10px (선택 안됨), 12px (선택됨)
- 레이블 font-weight 확인: 현재 500 (선택 안됨), 600 (선택됨)
- 레이블 색상 확인: #6b5c48 (선택 안됨), #1a1008 (선택됨)
- 레이블 line-height 및 letter-spacing 확인
- 레이블이 배경과 충분한 대비를 가지는지 확인
```

---

### DQA-007: 퍼센트 레이블 표시
**현황**: 엣지에 퍼센트 레이블이 표시되는지 확인 필요  
**레퍼런스**: 주요 관계에 퍼센트 값이 명확하게 표시됨 (12.4%, 62.3% 등)

**개발자 전달사항**:
```
- 현재 로직: isSelected || e.ratio >= 10 조건으로 표시
- 레퍼런스처럼 더 많은 엣지에 퍼센트 표시 고려
- 퍼센트 레이블 배경색 및 스타일 확인
- 퍼센트 레이블이 엣지 위에 명확하게 보이는지 확인
```

---

## 📊 Medium Priority Issues

### DQA-008: 색상 일관성
**현황**: 노드 색상이 타입별로 구분됨  
**레퍼런스**: 색상 코딩이 일관되고 명확함

**개발자 전달사항**:
```
- NODE_COLORS 확인:
  - company: #d85604 (주황)
  - person: #ad1b02 (빨강)
  - major: #e88d14 (호박색)
  - institution: #7c5cfc (보라)
- 레퍼런스와 색상 매칭 확인
- 색상 대비 및 접근성 확인 (WCAG AA 기준)
```

---

### DQA-009: 화살표 방향성
**현황**: 엣지 방향성이 명확한지 확인 필요  
**레퍼런스**: 모든 관계선에 화살표가 명확하게 표시됨

**개발자 전달사항**:
```
- marker-end 속성이 모든 엣지에 적용되는지 확인
- 화살표 색상이 엣지 색상과 일치하는지 확인
- 화살표 크기가 적절한지 확인 (markerWidth="8" markerHeight="6")
```

---

### DQA-010: 빈 공간 활용
**현황**: 노드들이 특정 영역에만 몰려있음  
**레퍼런스**: 화면 전체 공간이 균형있게 활용됨

**개발자 전달사항**:
```
- 경계 패딩 확인: 현재 80px
- 화면 비율에 따른 노드 분산 확인
- fitToView 함수가 모든 노드를 포함하도록 작동하는지 확인
```

---

## 🎨 디자인 시스템 체크리스트

### 타이포그래피
- [ ] 노드 내부 문자: 흰색, 볼드, 중앙 정렬
- [ ] 레이블: 검은색, 적절한 크기, 노드 아래 중앙 정렬
- [ ] 퍼센트 레이블: 검은색, 작은 폰트, 엣지 위 중앙 배치

### 색상
- [ ] 노드 색상: 타입별 일관된 색상
- [ ] 엣지 색상: 회색 계열, 충분한 대비
- [ ] 배경: 밝은 베이지/흰색, 그리드 패턴

### 간격 및 레이아웃
- [ ] 노드 간 최소 거리: 150px 이상
- [ ] 레이블과 노드 간 거리: 16px
- [ ] 화면 가장자리 패딩: 80px 이상

### 시각적 계층
- [ ] 연결이 많은 노드 → 중심 배치
- [ ] 연결이 적은 노드 → 외곽 배치
- [ ] 선택된 노드 → 시각적 강조 (글로우, 링 등)

---

## 🔧 개발자 액션 아이템 (우선순위별)

### 즉시 수정 (P0)
1. **노드 겹침 해결**
   ```javascript
   const minDist = 150; // 120 → 150
   // 반발력 강도 증가
   const force = Math.pow(...) * 10.0; // 8.0 → 10.0
   ```

2. **레이블 표시 개선**
   ```javascript
   // 모든 노드에 레이블 표시
   if (n.label) { // isSelected 조건 제거
     // 레이블 렌더링
   }
   ```

3. **레이아웃 알고리즘 조정**
   ```javascript
   // 중심 인력 강도 증가
   const centerForce = normalizedDegree * 0.6; // 0.3 → 0.6
   ```

### 이번 주 내 (P1)
4. 레이블 충돌 감지 및 회피
5. 엣지 가시성 개선 (두께, 색상, 투명도)
6. 퍼센트 레이블 표시 조건 완화

### 다음 스프린트 (P2)
7. 노드 크기 미세 조정 (연결도 기반)
8. 색상 시스템 검증 및 조정
9. 전체적인 시각적 밸런스 최적화

---

## 📋 테스트 체크리스트

### 레이아웃 테스트
- [ ] 노드가 겹치지 않음
- [ ] 모든 레이블이 완전히 표시됨
- [ ] 연결이 많은 노드가 중심에 위치
- [ ] 연결이 적은 노드가 외곽에 위치

### 가독성 테스트
- [ ] 모든 레이블이 읽을 수 있음
- [ ] 레이블이 다른 요소에 가려지지 않음
- [ ] 엣지가 명확하게 보임
- [ ] 퍼센트 레이블이 읽기 쉬움

### 시각적 일관성 테스트
- [ ] 색상이 레퍼런스와 일치
- [ ] 폰트 스타일이 일관됨
- [ ] 간격이 균등함
- [ ] 전체적인 밸런스가 좋음

---

**작성 완료**: 2026-02-17  
**다음 리뷰**: 수정 사항 적용 후
