# QA 이슈 리스트: 백엔드 / 사용자(프론트) 측면

**검토 기준**: 그래프 시각화 "사각형 뭉침·엣지 번들링" 미해결 상태 기준  
**대상**: Backend API (`graph.py` 등) · Frontend 렌더링·레이아웃·UX  
**목적**: QA 전문가 관점에서 백엔드·사용자 측 이슈를 구분해 리스트업

---

## 1. 백엔드/API 측 이슈

| ID | 구분 | 이슈 | 영향 | 검증 방법 |
|----|------|------|------|-----------|
| **BE-1** | 데이터 중복 | 동일 (from, to) 쌍의 엣지를 개별 행으로만 전달 | 프론트에서 수십 개 line이 한 경로에 겹쳐 굵은 띠처럼 보임. 전송량·렌더 비용 증가 | `/edges` 응답에서 동일 from/to 조합 개수 확인. 집계/번들 정보 없으면 프론트 부담 |
| **BE-2** | 레이아웃 힌트 부재 | 노드별 초기 좌표(x, y)를 API에서 제공하지 않음 | 프론트가 단독으로 배치 담당. 배치 로직 버그 시 "고정된 몇 개 좌표"에 몰림 | `/nodes` 또는 `/graph` 응답에 `x`, `y` 필드 존재 여부 확인. 없으면 100% 프론트 배치 |
| **BE-3** | 엣지 레이블 집계 부재 | (from, to)별로 ratio·건수 집계(예: 평균 60%, 10건)를 한 번에 주지 않음 | 프론트가 직접 그룹화해 "N% (M건)" 표시. 백엔드가 주면 일관·성능 유리 | 동일 쌍 다중 관계 시 응답에 `aggregated_ratio`, `edge_count` 등 제공 여부 |
| **BE-4** | limit·min_ratio 정책 노출 부재 | `limit`, `min_ratio`로 잘린 데이터에 대한 메타 정보 없음 | "18개 관계가 표시되지 않음" 등은 프론트 추정. 실제 제외 건수·기준을 API에서 알 수 없음 | 응답에 `total_available`, `filtered_out_by_min_ratio` 등 메타 필드 존재 여부 |
| **BE-5** | 대량 노드/엣지 시 페이징·스트리밍 없음 | nodes/edges 한 번에 limit까지 반환 | 노드 500·엣지 1000 수준에서 초기 로딩·메모리 부담. 점진적 로딩 불가 | 페이지네이션 또는 cursor 기반 API 존재 여부 |

---

## 2. 사용자/프론트엔드 측 이슈

### 2.1 노드 배치·겹침 (사각형 뭉침)

| ID | 구분 | 이슈 | 영향 | 검증 방법 |
|----|------|------|------|-----------|
| **FE-1** | 노드 겹침 | 여러 노드가 동일/유사 (cx, cy)에 렌더되어 한 덩어리로 보임 | 개별 노드 클릭·드래그 불가. "원 50개가 한 점에 겹쳐 있음" | 로드 후 SVG 내 `<circle>` 의 cx/cy 분포 확인. 4~5개 좌표에만 몰려 있으면 미해결 |
| **FE-2** | 초기 배치 공간 부족 | 뷰포트가 작거나 컴포넌트 수가 많을 때 셀/원 반경이 너무 작음 | 최소 레이아웃 공간(700×500)·노드 수 기반 반경을 써도, force 후 다시 뭉칠 수 있음 | 다양한 뷰포트·노드 수에서 초기 배치 반경·최종 bbox 스케일 확인 |
| **FE-3** | Force 후 재뭉침 | 반발력·스프링·감쇠 설정으로 인해 시뮬 종료 시 노드가 다시 밀집 | 초기에는 퍼졌다가 최종 프레임에서 4군데로 수렴 | maxIter, repulsionStrength, idealDist, damping 등으로 시뮬 끝 좌표 분포 확인 |
| **FE-4** | 연결 컴포넌트만 배치 | 엣지가 없는 노드는 `allNodes`에서 제외되어 positions 미설정 | 해당 노드가 이전 좌표로 그려지거나 렌더 스킵. "일부만 보임" 가능 | 엣지 없는 노드가 있을 때 positions 및 렌더링 여부 확인 |

### 2.2 엣지·라벨

| ID | 구분 | 이슈 | 영향 | 검증 방법 |
|----|------|------|------|-----------|
| **FE-5** | 엣지 과다 중첩 | 동일 (from, to) 다수 개별 line/path가 겹쳐 굵은 띠·라벨 겹침 | "37.5% (3건)", "33.8% (14건)" 등이 읽기 어려움 | 동일 쌍 엣지 수만큼 시각 요소가 1개로 번들링·곡선 분리되는지 확인 |
| **FE-6** | 엣지 레이블 위치 충돌 | 레이블이 선 중앙에만 있어 여러 엣지가 겹치면 텍스트가 겹침 | 가독성 저하 | 번들당 하나의 레이블·오프셋 또는 곡선별 분리 레이블 적용 여부 |
| **FE-7** | 직선만 사용 | 동일 쌍 다중 엣지를 곡선(path Q)으로 분리하지 않고 직선만 사용 | 시각적으로 한 줄로만 보여 구분 불가 | 다중 엣지 시 path d에 Q(Quadratic) 사용·제어점 오프셋 적용 여부 |

### 2.3 라벨·가독성

| ID | 구분 | 이슈 | 영향 | 검증 방법 |
|----|------|------|------|-----------|
| **FE-8** | 노드 라벨 적체 | 같은 위치의 노드들이 같은 y 아래에 라벨만 쌓여 세로로 겹침 | "(주)우리금융지주", "우리종합금융" 등이 한 줄로 겹쳐 읽기 어려움 | 노드 겹침 해소가 선행. 해소 후에도 라벨 시프트·줄바꿈 정책 필요 |
| **FE-9** | 지분/필터 정보 미노출 | min_ratio(예: 5%) 미만 관계 제외 시 사용자에게 안내 없음 | "왜 이 관계가 없지?" 불만·혼란 | 톱바/범례에 "지분 N% 미만 제외" 등 문구 또는 필터 칩 노출 여부 |

### 2.4 레이아웃·인터랙션

| ID | 구분 | 이슈 | 영향 | 검증 방법 |
|----|------|------|------|-----------|
| **FE-10** | 초기 레이아웃 공간 미활용 | 캔버스가 넓은데 노드가 한쪽에만 몰림 | 첫인상 나쁨, 수동 드래그에만 의존 | 로드 직후 노드 bbox가 extent 90% 정도를 쓰는지 확인 |
| **FE-11** | 클러스터 내 개별 선택 어려움 | 겹친 노드에서 특정 노드만 클릭·드래그하기 어려움 | "노드를 클릭하면 상세 정보" 안내와 상충 | 겹침 제거 후에도 호버/클릭 시 상단 노드만 선택되는지, 피킹 순서 일관성 확인 |
| **FE-12** | 뷰포트·타이밍 | getGraphViewport() 호출 시점에 #graphArea 크기가 0이거나 작음 | layout extent가 700×500으로 고정되어도, 초기 크기 0이면 fallback 900×600 사용. 타이밍에 따라 레이아웃이 달라질 수 있음 | DOM 준비 후 한 번 리사이즈 또는 다음 프레임에서 getGraphViewport 재호출·initPositions 재실행 여부 |

---

## 3. 우선순위 요약

| 우선순위 | 백엔드 | 프론트엔드 |
|----------|--------|------------|
| **P0 (Critical)** | BE-2(선택: 초기 좌표 힌트 제공 시 프론트 부담 감소) | **FE-1, FE-2, FE-3** — 노드 겹침 해소 없으면 그래프 사용 불가 |
| **P1 (High)** | BE-1(엣지 집계/번들 정보), BE-3(레이블 집계) | **FE-5, FE-6, FE-7** — 엣지 번들링·곡선·레이블 가독성 |
| **P2 (Medium)** | BE-4(메타 정보), BE-5(페이징) | FE-8(노드 라벨), FE-9(min_ratio 안내), FE-10~12 |

---

## 4. 권장 조치 (QA 관점)

1. **회귀 테스트**: 노드 50~200, 엣지 100~500 구간에서  
   - 로드 직후 SVG 내 circle의 cx/cy 유니크 개수 ≥ 노드 수에 가깝게 퍼져 있는지  
   - 동일 (from, to) 엣지가 1개 시각 경로(또는 곡선 분리) + 1개 레이블("N% (M건)")로만 그려지는지  
2. **백엔드 스펙 검증**: `/edges` 호출 시 동일 쌍 다중 행 개수 확인; 필요 시 집계 응답 스펙 추가 검토.  
3. **문서 반영**: 이 리스트를 `QA-ISSUES-GRAPH-VISUALIZATION.md`와 연동해 해결 시 상태 갱신.
