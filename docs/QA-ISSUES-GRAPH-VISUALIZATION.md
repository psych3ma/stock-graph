# QA 이슈 리스트: 그래프 시각화 (GraphIQ)

**검토 기준일**: 2025-02  
**재검사일**: 적용 후 갱신 — 해결 여부·신규 이슈 반영  
**대상**: `frontend/graph.js` / `graph.html` — 노드·엣지·라벨 레이아웃 및 렌더링

---

## 기존 이슈 해결 현황

### P0 (Critical)

| ID | 이슈 | 한줄 요약 | 상태 | 비고 |
|----|------|-----------|------|------|
| **QA-1** | 스케일 축소로 레이아웃 간격 무너짐 | scale 하한 1 | **해결** | `scale = Math.max(1, Math.min(...))` 적용. 추가로 `!Number.isFinite(scale)` 시 `scale = 1` 폴백으로 NaN 오염 방지. |
| **QA-2** | `label` 미존재 시 라벨 반경 미반영 | 필드 통일/폴백 | **해결** | `getLayoutRadius(node)` 내 `node.label ?? node.name ?? ''` 로 표시용 필드 통일. |

### P1 (High)

| ID | 이슈 | 한줄 요약 | 상태 | 비고 |
|----|------|-----------|------|------|
| **QA-3** | 세로(라벨 아래) 반지름 미반영 | 하한에 labelGap+height | **해결** | `verticalExtent = base + labelGap + labelHeight`, `withLabel = Math.max(horizontalRadius, verticalExtent)` 반영. |
| **QA-4** | 라벨 겹침이 “시프트”에만 의존 | 레이아웃 강화가 주 | **부분 해결** | QA-1~3으로 레이아웃 간격·물리 반경 강화 완료. “시프트 상한/클리핑”은 미적용 — 밀집 시 세로 누적 가능성 남음. |
| **QA-5** | 노드 타입별 색 시각 구분 | fill/stroke 반영 | **검증 필요** | 코드상 `getNodeColor(n)` → 원 `stroke`, 선택 시 `fill` 적용. 범례와 동일 체계(회사=주황, 개인=빨강, 최대주주=호박, 기관=보라). 실제 화면에서 타입별 구분이 충분한지 QA 검증 필요. |

### P2 (Medium)

| ID | 이슈 | 한줄 요약 | 상태 | 비고 |
|----|------|-----------|------|------|
| **QA-6** | Fit View·클리핑과 뷰포트 일치 | 검증 | **검증 필요** | QA-1·getGraphViewport 적용 후, 뷰포트 리사이즈 시 라벨 클리핑 경계·Fit View 결과가 기대와 일치하는지 실제 기기/해상도에서 확인 필요. |
| **QA-7** | 대량 노드 성능·가독성 | 정책 수립 | **미해결** | 노드 수 구간별(50/200/500) 프레임·배치 시간 측정, 라벨 표시 전략(줌/호버 등) 미적용. 그대로 유지. |

---

## 신규 이슈 (적용 후 파악)

### P1 (High)

| ID | 이슈 | 한줄 요약 | 권장 |
|----|------|-----------|------|
| **QA-8** | 지분 N% 미만 관계 숨김 사용자 인지 부족 | `min_ratio`(기본 5)로 일부 엣지가 API에서 제외되나, UI에 “5% 미만 숨김” 등 필터 표시 없음 | 톱바 또는 범례 근처에 “지분 5% 미만 관계 제외” 문구 또는 필터 칩 노출. 설정에서 `min_ratio` 변경 가능하면 “현재 N% 이상만 표시” 명시. |

### P2 (Medium)

| ID | 이슈 | 한줄 요약 | 권장 |
|----|------|-----------|------|
| **QA-9** | 지분 100% 초과 데이터 표시 | 원시 데이터 오류로 100.1% 등이 나올 수 있음 | **조치 완료**: 백엔드 `_clamp_ratio`, 프론트 `formatRatio`로 0~100 clamp 적용. 원시 데이터/집계는 별도 데이터 품질 이슈로 추적. |
| **QA-10** | NaN 좌표로 엣지/라벨 깨짐 | `x2="NaN" y2="NaN"` 등 SVG 속성에 NaN 전달 | **조치 완료**: `isFiniteCoord(p)`, `dist` 유한성 검사로 엣지 스킵; 스케일 단계에서 `scale`·`x/y` 비유한 시 폴백. 근본 원인 추적은 `docs/CTO-REVIEW-NAN-COORDS.md` 참고. |

### P3 (Low / 개선)

| ID | 이슈 | 한줄 요약 | 권장 |
|----|------|-----------|------|
| **QA-11** | 설정 숫자 분산 | Force/레이아웃 관련 숫자가 `graph.js` 내 `LAYOUT_CONFIG` 등에만 있음 | 필요 시 `force_config.js` 등으로 분리해 가독·튜닝 용이하게 (기존 CTO 검토안 ②). |

---

## 요약

- **해결됨**: QA-1, QA-2, QA-3.  
- **부분 해결**: QA-4 (레이아웃 강화 완료, 시프트 상한 미적용).  
- **검증 필요**: QA-5(타입별 색), QA-6(Fit View·클리핑).  
- **미해결**: QA-7(대량 노드 성능·가독성).  
- **신규**: QA-8(min_ratio 사용자 인지), QA-9·QA-10(조치 완료), QA-11(설정 분리, 선택).

**우선 조치 권장**: QA-8(필터/설정 문구 노출) 적용 후, QA-5·QA-6 실제 환경에서 검증. QA-7은 노드 규모 정책 수립 시 점검.

---

## 백엔드/사용자 측 상세 이슈 리스트

그래프 "사각형 뭉침·엣지 번들링" 관련 **백엔드(API)** 와 **사용자(프론트엔드)** 측 이슈를 QA 전문가 관점으로 구분·리스트업한 문서:

→ **[QA-BACKEND-FRONTEND-ISSUES.md](./QA-BACKEND-FRONTEND-ISSUES.md)**

- **백엔드**: BE-1(엣지 중복 전송), BE-2(레이아웃 힌트 부재), BE-3(엣지 레이블 집계), BE-4(필터 메타 정보), BE-5(페이징)
- **프론트엔드**: FE-1~4(노드 겹침·배치), FE-5~7(엣지 번들·곡선·레이블), FE-8~9(라벨·min_ratio 안내), FE-10~12(레이아웃·인터랙션·뷰포트)
